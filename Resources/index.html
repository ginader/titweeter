<html>
	<head>
		<title>Titweeter: Timeline</title>
	</head>
	<body>
		<script src="js/titweeter.js"></script>
        <script>
        TT.log('Fetching from accounts');
        TT.setCreds('', '');
        var creds = TT.getCreds(), login=false;

        if (creds.login && creds.passwd) {
            TT.log('Loading Timeline');
            TT.showTimelineView();
        } else {
            TT.log('No Creds, loading login screen');
            TT.showSettings();
            login=true;
        }

        Titanium.UI.currentWindow.addEventListener('focused', function() {
            if (login) {
                TT.log('Timeline window focused after login');
                var creds = TT.getCreds();
                if (creds.login && creds.passwd) {
                    TT.log('We have creds, showing timeline.');
                    login = false;
                    TT.showTimelineView();
                }
            }
        });

        </script>
	</body>
</html>
